export default "importScripts('lib/tank.js');\n\nvar TankAI=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),o=function(){function t(){this._collisionCounter=0}return t.prototype.init=function(t,e){this._brain=new r.default,this._brain.createLayers([4,5,4,3]),this._brain.randomize()},t.prototype.loop=function(t,e){var n,r;this._collisionCounter>0&&this._collisionCounter--;var o=null!==t.radar.wallDistance?t.radar.wallDistance:300;o=o/150-1;var i,u=300,s=0;if(t.radar.enemy){for(n=t.radar.enemy.x-t.x,r=t.radar.enemy.y-t.y,u=Math.sqrt(n*n+r*r),s=180/Math.PI*Math.atan2(t.radar.enemy.y-t.y,t.radar.enemy.x-t.x),s-=t.angle;s>180;)s-=360;for(;s<-180;)s+=360;s/=8}(t.collisions.ally||t.collisions.enemy||t.collisions.wall)&&(this._collisionCounter=30),i=[o,u,s,this._collisionCounter>0?1:0];var a=this._brain.process(i);e.THROTTLE=a[0],e.TURN=a[1],e.SHOOT=a[2]>0?.1:0},t}();e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(2),o=function(){function t(){this._network=[],this._connections=[],this._nodes=[]}return t.prototype.createLayers=function(t){var e,n,o;for(e=0;e<t.length;e++)for(this._network[e]=[],n=0;n<t[e];n++)this._network[e][n]=new r.default,this._nodes.push(this._network[e][n]);for(e=1;e<this._network.length;e++)for(n=0;n<this._network[e].length;n++)for(o=0;o<this._network[e-1].length;o++)this._network[e][n].setInput(o,this._network[e-1][o].getOutput(n)),this._connections.push(this._network[e-1][o].getOutput(n))},t.prototype.randomize=function(){for(var t=0;t<this._network.length;t++)for(var e=0;e<this._network[t].length;e++)this._network[t][e].randomize()},t.prototype.getNode=function(t,e){if(!this._network[t]||!this._network[t][e])throw new Error(\"Node not found (\"+t+\":\"+e+\")\");return this._network[t][e]},Object.defineProperty(t.prototype,\"layerCount\",{get:function(){return this._network.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"connectionCount\",{get:function(){return this._connections.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"nodeCount\",{get:function(){return this._nodes.length},enumerable:!1,configurable:!0}),t.prototype.getLayerSize=function(t){return this._network[t]?this._network[t].length:0},t.prototype.process=function(t){var e,n=[];for(e=0;e<t.length;e++)this.getNode(0,e).getInput(0).input=t[e];for(e=0;e<this._nodes.length;e++)this._nodes[e].process();var r=this._network[this._network.length-1];for(e=0;e<r.length;e++)n.push(r[e].getOutput(0).process());return n},t}();e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(3),o=n(4),i=function(){function t(){this._inputs=[],this._outputs=[],this._value=0,this._activation=new o.default(o.ActivationType.Linear),this.bias=0}return Object.defineProperty(t.prototype,\"activationType\",{get:function(){return this._activation.type},set:function(t){this._activation=new o.default(t)},enumerable:!1,configurable:!0}),t.prototype.getInput=function(t){return this._inputs[t]||(this._inputs[t]=new r.default),this._inputs[t]},t.prototype.setInput=function(t,e){this._inputs[t]=e},t.prototype.getOutput=function(t){return this._outputs[t]||(this._outputs[t]=new r.default,this._outputs[t].input=this._value),this._outputs[t]},t.prototype.configure=function(t,e,n,r){var o;for(o=0;o<t.length;o++)this.getInput(o).weight=t[o];for(o=0;o<e.length;o++)this.getOutput(o).weight=e[o];this.bias=n,this.activationType=r},t.prototype.randomize=function(){for(var t=0,e=this._inputs;t<e.length;t++){e[t].weight=2*Math.random()-1}for(var n=0,r=this._outputs;n<r.length;n++){r[n].weight=2*Math.random()-1}this.bias=2*Math.random()-1;var i=Object.keys(o.ActivationType).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}));this.activationType=i[Math.floor(Math.random()*i.length)]},t.prototype.process=function(){for(var t=0,e=0,n=this._inputs;e<n.length;e++){t+=n[e].process()}t+=this.bias,t=this._activation.process(t),this._value=t;for(var r=0,o=this._outputs;r<o.length;r++){o[r].input=t}},t}();e.default=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(){this.input=0,this.weight=1}return t.prototype.process=function(){return this.input*this.weight},t}();e.default=r},function(t,e,n){\"use strict\";var r;Object.defineProperty(e,\"__esModule\",{value:!0}),e.ActivationType=void 0,function(t){t[t.Linear=0]=\"Linear\",t[t.BinaryStep=1]=\"BinaryStep\",t[t.Sigmoid=2]=\"Sigmoid\",t[t.TanH=3]=\"TanH\",t[t.ReLU=4]=\"ReLU\",t[t.SoftPlus=5]=\"SoftPlus\",t[t.LeakyReLU=6]=\"LeakyReLU\",t[t.Gaussian=7]=\"Gaussian\"}(r=e.ActivationType||(e.ActivationType={}));var o=function(){function t(t){this._type=r.Linear,this._type=t}return Object.defineProperty(t.prototype,\"type\",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.process=function(t){switch(this._type){case r.Linear:return t;case r.BinaryStep:return t<0?0:1;case r.Sigmoid:return t>100?1:t<-100?0:1/(1+Math.exp(-t));case r.TanH:return t>100?1:t<-100?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t));case r.ReLU:return t<0?0:t;case r.SoftPlus:return t>100?t:Math.log(1+Math.exp(t));case r.LeakyReLU:return t>100?t:t<0?.1*t:t;case r.Gaussian:return t>100||t<-100?0:Math.exp(-t*t);default:throw new Error(\"Unsupported  activation type: \"+this._type)}},t}();e.default=o}]);\n\nconst ai = new TankAI.default();\n\ntank.init(function(settings, info) {\n  ai.init(settings, info)\n});\n\ntank.loop(function(state, control) {\n  ai.loop(state, control);\n});\n";